{"version":3,"file":"static/webpack/static/development/pages/_app.js.4c64ea154784898f1f69.hot-update.js","sources":["webpack:///./saga/user.js"],"sourcesContent":["import { all, fork, takeLatest, put, call } from \"redux-saga/effects\";\nimport {\n  LOG_IN_SUCCESS,\n  LOG_IN_FAILURE,\n  LOG_IN_REQUEST,\n  LOG_OUT_SUCCESS,\n  LOG_OUT_FAILURE,\n  LOG_OUT_REQUEST\n} from \"../reducers/user\";\nimport { ADD_EDOC_REQUEST } from \"../reducers/edocument01\";\nimport axios from \"axios\";\naxios.defaults.baseURL = \"http://localhost:5000\";\n\nfunction logoutAPI() {\n  console.log(\"looutAPI\");\n  // 서버에 요청을 보내는 부분\n  return axios.post(\"/user/logout\");\n}\nfunction* logout() {\n  try {\n    yield call(logoutAPI);\n    yield put({\n      type: LOG_OUT_SUCCESS\n    });\n  } catch (e) {\n    yield put({\n      type: LOG_OUT_FAILURE\n    });\n  }\n}\nfunction* watchLoout() {\n  yield takeLatest(LOG_OUT_REQUEST, logout);\n}\n\n// import axios from \"axios\";\n// ------------------------------------------------------ //\nfunction loginAPI(data) {\n  console.log(\"loginAPI\", data);\n  // 서버에 요청을 보내는 부분\n  return axios.post(\"/user/login\", data, {\n    withCredentials: true // 쿠키를 받기 위함. 서버쪽도 설정해야함 - index.js\n  });\n}\nfunction* login(action) {\n  var result = \"\";\n  try {\n    result = yield call(loginAPI, action.data);\n    yield put({\n      type: ADD_EDOC_REQUEST,\n      data: {\n        stcode: result.data.SUSTCODE,\n        scdbname: result.data.SCDBNAME,\n        schostip: result.data.SCHOSTIP\n      }\n    });\n    yield put({\n      // put은 dispatch 동일\n      type: LOG_IN_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    // console.log(\"loginERRER\", e.response.data);\n    yield put({\n      type: LOG_IN_FAILURE,\n      data: e.response.data\n    });\n  }\n}\nfunction* watchLogin() {\n  // takeLatest가 LOG_IN 액션이 dispatch 되길 기다려서\n  // dispatch될 때 login 제너레이터를 호출 한다.\n  yield takeLatest(LOG_IN_REQUEST, login);\n}\n// 세가지 가 세트 !! //\n// ------------------------------------------------------ //\n\nexport default function* userSaga() {\n  yield all([fork(watchLogin), fork(watchLoout)]);\n}\n// call = 동기요청, fork = 비동기요청\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAkBA;;;AAYA;;;AAaA;;;AAyBA;;;AAQA;AACA;AA7EA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAHA;AAAA;AAGA;AACA;AADA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAOA;AACA;AADA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AAFA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AAJA;AAGA;AAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AACA;AALA;AAAA;AAYA;AACA;AACA;AACA;AAHA;AACA;AAbA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAmBA;AACA;AACA;AAFA;AACA;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAwBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}