{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React, { useState, useCallback } from \"react\";\nimport { Table, Input, Button, Icon, Tabs } from \"antd\";\nimport Link from \"next/link\";\nimport Highlighter from \"react-highlight-words\";\nimport { useSelector } from \"react-redux\";\nimport { LIST_EDEG1CODE } from \"../../../globalValue\";\nimport Edit01 from \"../editor/edit01\";\n\nvar edoc01 = function edoc01() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchText = _useState2[0],\n      setSerchText = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredInfo = _useState4[0],\n      setFilterdInfo = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sortedInfo = _useState6[0],\n      setSortedInfo = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      clickedItem = _useState8[0],\n      setClickedItem = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      editVisible = _useState10[0],\n      setEditVisible = _useState10[1];\n\n  var _useState11 = useState(\"N\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      editGubun = _useState12[0],\n      setEditGubun = _useState12[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.edocument;\n  }),\n      edoc = _useSelector.edoc,\n      isLogging = _useSelector.isLogging;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.me;\n  }),\n      me = _useSelector2.me; // 데이터 리덕스에서 가져와서 나누기\n\n\n  var doc = edoc !== null && edoc.filter(function (item) {\n    return (item.EDSTCode === me.SUSTCODE || item.EJBEFJOINSTCODE === me.SUSTCODE) && item.ERSTCODE !== me.SUSTCODE && item.EDEJSeq === item.EJSEQ && item.EDEG1Code >= 100 && item.EDEG1Code < 200;\n  });\n  console.log(\"me !!\", me);\n  console.log(\"doc !!\", edoc);\n  console.log(\"doc !!\", doc);\n  var doc2 = edoc !== null && edoc.filter(function (item) {\n    return item.EJAFTJOINSTCODE === me.SUSTCODE && item.EJSEQ === item.EDEJSeq && (item.EJSIGNGUBUN === 1 || item.EJSIGNGUBUN === 4) && item.EDEG1Code >= 100 && item.EDEG1Code < 200;\n  });\n  var doc3 = edoc !== null && edoc.filter(function (item) {\n    return item.EJAFTJOINSTCODE === me.SUSTCODE && item.EJSEQ === item.EDEJSeq && item.EJSIGNGUBUN !== 1 && item.EJSIGNGUBUN !== 4 && item.EDEG1Code >= 100 && item.EDEG1Code < 200;\n  });\n  var searchInput = null; // 검색기능\n\n  var getColumnSearchProps = function getColumnSearchProps(dataIndex) {\n    return {\n      filterDropdown: function filterDropdown(_ref) {\n        var setSelectedKeys = _ref.setSelectedKeys,\n            selectedKeys = _ref.selectedKeys,\n            confirm = _ref.confirm,\n            clearFilters = _ref.clearFilters;\n        return React.createElement(\"div\", {\n          style: {\n            padding: 8\n          }\n        }, React.createElement(Input, {\n          ref: function ref(node) {\n            searchInput = node;\n          },\n          placeholder: \"Search \".concat(dataIndex),\n          value: selectedKeys[0],\n          onChange: function onChange(e) {\n            return setSelectedKeys(e.target.value ? [e.target.value] : []);\n          },\n          onPressEnter: function onPressEnter() {\n            return handleSearch(selectedKeys, confirm);\n          },\n          style: {\n            width: 188,\n            marginBottom: 8,\n            display: \"block\"\n          }\n        }), React.createElement(Button, {\n          type: \"primary\",\n          onClick: function onClick() {\n            return handleSearch(selectedKeys, confirm);\n          },\n          icon: \"search\",\n          size: \"small\",\n          style: {\n            width: 90,\n            marginRight: 8\n          }\n        }, \"Search\"), React.createElement(Button, {\n          onClick: function onClick() {\n            return handleReset(clearFilters);\n          },\n          size: \"small\",\n          style: {\n            width: 90\n          }\n        }, \"Reset\"));\n      },\n      filterIcon: function filterIcon(filtered) {\n        return React.createElement(Icon, {\n          type: \"search\",\n          style: {\n            color: filtered ? \"#1890ff\" : undefined\n          }\n        });\n      },\n      onFilter: function onFilter(value, record) {\n        return record[dataIndex].toString().toLowerCase().includes(value.toLowerCase());\n      },\n      onFilterDropdownVisibleChange: function onFilterDropdownVisibleChange(visible) {\n        if (visible) {\n          setTimeout(function () {\n            return searchInput.select();\n          });\n        }\n      },\n      render: function render(text) {\n        return React.createElement(Highlighter, {\n          highlightStyle: {\n            backgroundColor: \"#ffc069\",\n            padding: 0\n          },\n          searchWords: [searchText],\n          autoEscape: true,\n          textToHighlight: text.toString()\n        });\n      }\n    };\n  };\n\n  var handleSearch = function handleSearch(selectedKeys, confirm) {\n    confirm();\n    setSerchText(selectedKeys[0]);\n  };\n\n  var handleReset = function handleReset(clearFilters) {\n    clearFilters();\n    setSerchText(\"\");\n  }; // 필터 기능\n\n\n  var handleChange = function handleChange(pagination, filters, sorter) {\n    // console.log(\"Various parameters\", pagination, filters, sorter);\n    setFilterdInfo(filters);\n    setSortedInfo(sorter); // this.setState({\n    //   filteredInfo: filters,\n    //   sortedInfo: sorter\n    // });\n  };\n\n  var filtedEdeg1code = LIST_EDEG1CODE.map(function (item, index) {\n    return {\n      text: item.name,\n      value: item.name\n    };\n  });\n  var columns = [{\n    title: \"구분\",\n    dataIndex: \"EDEG1Name\",\n    key: \"EDEG1Name\",\n    width: \"10%\",\n    filters: filtedEdeg1code.filter(function (item) {\n      return item.text === \"인사\" || item.text === \"업무\" || item.text === \"총무\";\n    }),\n    filteredValue: filteredInfo.EDEG1Name || null,\n    onFilter: function onFilter(value, record) {\n      // console.log(record, value, record.EDEG1Name.includes(value));\n      return record.EDEG1Name.includes(value);\n    }\n  }, _objectSpread({\n    title: \"제목\",\n    dataIndex: \"EDTitle\",\n    key: \"EDTitle\",\n    width: \"50%\"\n  }, getColumnSearchProps(\"EDTitle\")), {\n    title: \"기안일\",\n    dataIndex: \"EDDateTime\",\n    key: \"EDDateTime\",\n    width: \"20%\",\n    sorter: function sorter(a, b) {\n      return new Date(a.EDDateTime) - new Date(b.EDDateTime);\n    },\n    sortOrder: sortedInfo.columnKey === \"EDDateTime\" && sortedInfo.order\n  }, _objectSpread({\n    title: \"결재자\",\n    dataIndex: \"EJAFTJOINSTNAME\",\n    key: \"EJAFTJOINSTNAME\",\n    width: \"10%\"\n  }, getColumnSearchProps(\"EJAFTJOINSTNAME\")), {\n    title: \"상태\",\n    dataIndex: \"EJSIGNNAME\",\n    key: \"EJSIGNNAME\",\n    width: \"10%\"\n  }];\n  var columns2 = [{\n    title: \"구분\",\n    dataIndex: \"EDEG1Name\",\n    key: \"EDEG1Name\",\n    width: \"10%\",\n    filters: filtedEdeg1code.filter(function (item) {\n      return item.text === \"인사\" || item.text === \"업무\" || item.text === \"총무\";\n    }),\n    filteredValue: filteredInfo.EDEG1Name || null,\n    onFilter: function onFilter(value, record) {\n      // console.log(record, value, record.EDEG1Name.includes(value));\n      return record.EDEG1Name.includes(value);\n    }\n  }, _objectSpread({\n    title: \"제목\",\n    dataIndex: \"EDTitle\",\n    key: \"EDTitle\",\n    width: \"50%\"\n  }, getColumnSearchProps(\"EDTitle\")), {\n    title: \"기안일\",\n    dataIndex: \"EDDateTime\",\n    key: \"EDDateTime\",\n    width: \"20%\",\n    sorter: function sorter(a, b) {\n      return new Date(a.EDDateTime) - new Date(b.EDDateTime);\n    },\n    sortOrder: sortedInfo.columnKey === \"EDDateTime\" && sortedInfo.order\n  }, _objectSpread({\n    title: \"기안자\",\n    dataIndex: \"EJBEFJOINSTNAME\",\n    key: \"EJBEFJOINSTNAME\",\n    width: \"10%\"\n  }, getColumnSearchProps(\"EJBEFJOINSTNAME\")), {\n    title: \"상태\",\n    dataIndex: \"EJSIGNNAME\",\n    key: \"EJSIGNNAME\",\n    width: \"10%\"\n  }];\n  var columns3 = [{\n    title: \"구분\",\n    dataIndex: \"EDEG1Name\",\n    key: \"EDEG1Name\",\n    width: \"10%\",\n    filters: filtedEdeg1code.filter(function (item) {\n      return item.text === \"인사\" || item.text === \"업무\" || item.text === \"총무\";\n    }),\n    filteredValue: filteredInfo.EDEG1Name || null,\n    onFilter: function onFilter(value, record) {\n      // console.log(record, value, record.EDEG1Name.includes(value));\n      return record.EDEG1Name.includes(value);\n    }\n  }, _objectSpread({\n    title: \"제목\",\n    dataIndex: \"EDTitle\",\n    key: \"EDTitle\",\n    width: \"50%\"\n  }, getColumnSearchProps(\"EDTitle\")), {\n    title: \"기안일\",\n    dataIndex: \"EDDateTime\",\n    key: \"EDDateTime\",\n    width: \"20%\",\n    sorter: function sorter(a, b) {\n      return new Date(a.EDDateTime) - new Date(b.EDDateTime);\n    },\n    sortOrder: sortedInfo.columnKey === \"EDDateTime\" && sortedInfo.order\n  }, _objectSpread({\n    title: \"기안자\",\n    dataIndex: \"EDSTNAME\",\n    key: \"EDSTNAME\",\n    width: \"10%\"\n  }, getColumnSearchProps(\"EDSTNAME\")), {\n    title: \"상태\",\n    dataIndex: \"EJSIGNNAME\",\n    key: \"EJSIGNNAME\",\n    width: \"10%\"\n  }];\n\n  var itemClicked =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(record, index) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"itemClicked\", record, index);\n              _context.next = 3;\n              return setClickedItem(record);\n\n            case 3:\n              _context.next = 5;\n              return setEditGubun(\"U\");\n\n            case 5:\n              _context.next = 7;\n              return setEditVisible(true);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function itemClicked(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var TabPane = Tabs.TabPane;\n  return isLogging || edoc === null ? null : React.createElement(Tabs, {\n    type: \"card\"\n  }, React.createElement(TabPane, {\n    tab: \"\\uB0B4 \\uACB0\\uC7AC\\uD568\",\n    key: \"1\"\n  }, editVisible ? React.createElement(Edit01, {\n    clickedItem: clickedItem,\n    setEditVisible: setEditVisible,\n    gubun: editGubun,\n    me: me\n  }) : React.createElement(Table, {\n    columns: columns,\n    dataSource: doc,\n    onChange: handleChange,\n    onRow: function onRow(record, rowIndex) {\n      return {\n        onClick: function onClick() {\n          return itemClicked(record, rowIndex);\n        }\n      };\n    }\n  })), React.createElement(TabPane, {\n    tab: \"\\uC5C5\\uBB34 \\uC694\\uCCAD\",\n    key: \"2\"\n  }, React.createElement(Table, {\n    columns: columns2,\n    dataSource: doc2\n  })), React.createElement(TabPane, {\n    tab: \"\\uC804\\uC790 \\uBB38\\uC11C\\uD568\",\n    key: \"3\"\n  }, React.createElement(Table, {\n    columns: columns3,\n    dataSource: doc3\n  }))); // return <div />;\n};\n\nexport default edoc01;","map":{"version":3,"sources":["/Users/linepayroll/Desktop/nextApp/front/pages/edocument/edoc/edoc01.js"],"names":["React","useState","useCallback","Table","Input","Button","Icon","Tabs","Link","Highlighter","useSelector","LIST_EDEG1CODE","Edit01","edoc01","searchText","setSerchText","filteredInfo","setFilterdInfo","sortedInfo","setSortedInfo","clickedItem","setClickedItem","editVisible","setEditVisible","editGubun","setEditGubun","state","edocument","edoc","isLogging","me","doc","filter","item","EDSTCode","SUSTCODE","EJBEFJOINSTCODE","ERSTCODE","EDEJSeq","EJSEQ","EDEG1Code","console","log","doc2","EJAFTJOINSTCODE","EJSIGNGUBUN","doc3","searchInput","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","e","target","value","handleSearch","width","marginBottom","display","marginRight","handleReset","filterIcon","filtered","color","undefined","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","setTimeout","select","render","text","backgroundColor","handleChange","pagination","filters","sorter","filtedEdeg1code","map","index","name","columns","title","key","filteredValue","EDEG1Name","a","b","Date","EDDateTime","sortOrder","columnKey","order","columns2","columns3","itemClicked","TabPane","rowIndex","onClick"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport { Table, Input, Button, Icon, Tabs } from \"antd\";\nimport Link from \"next/link\";\nimport Highlighter from \"react-highlight-words\";\nimport { useSelector } from \"react-redux\";\nimport { LIST_EDEG1CODE } from \"../../../globalValue\";\nimport Edit01 from \"../editor/edit01\";\nconst edoc01 = () => {\n  const [searchText, setSerchText] = useState(\"\");\n  const [filteredInfo, setFilterdInfo] = useState({});\n  const [sortedInfo, setSortedInfo] = useState({});\n  const [clickedItem, setClickedItem] = useState({});\n  const [editVisible, setEditVisible] = useState(false);\n  const [editGubun, setEditGubun] = useState(\"N\");\n  const { edoc, isLogging } = useSelector(state => state.edocument);\n  const { me } = useSelector(state => state.me);\n  // 데이터 리덕스에서 가져와서 나누기\n  const doc =\n    edoc !== null &&\n    edoc.filter(\n      item =>\n        (item.EDSTCode === me.SUSTCODE ||\n          item.EJBEFJOINSTCODE === me.SUSTCODE) &&\n        item.ERSTCODE !== me.SUSTCODE &&\n        item.EDEJSeq === item.EJSEQ &&\n        (item.EDEG1Code >= 100 && item.EDEG1Code < 200)\n    );\n  console.log(\"me !!\", me);\n  console.log(\"doc !!\", edoc);\n  console.log(\"doc !!\", doc);\n  const doc2 =\n    edoc !== null &&\n    edoc.filter(\n      item =>\n        item.EJAFTJOINSTCODE === me.SUSTCODE &&\n        item.EJSEQ === item.EDEJSeq &&\n        (item.EJSIGNGUBUN === 1 || item.EJSIGNGUBUN === 4) &&\n        (item.EDEG1Code >= 100 && item.EDEG1Code < 200)\n    );\n  const doc3 =\n    edoc !== null &&\n    edoc.filter(\n      item =>\n        item.EJAFTJOINSTCODE === me.SUSTCODE &&\n        item.EJSEQ === item.EDEJSeq &&\n        item.EJSIGNGUBUN !== 1 &&\n        item.EJSIGNGUBUN !== 4 &&\n        (item.EDEG1Code >= 100 && item.EDEG1Code < 200)\n    );\n\n  var searchInput = null;\n\n  // 검색기능\n  const getColumnSearchProps = dataIndex => ({\n    filterDropdown: ({\n      setSelectedKeys,\n      selectedKeys,\n      confirm,\n      clearFilters\n    }) => (\n      <div style={{ padding: 8 }}>\n        <Input\n          ref={node => {\n            searchInput = node;\n          }}\n          placeholder={`Search ${dataIndex}`}\n          value={selectedKeys[0]}\n          onChange={e =>\n            setSelectedKeys(e.target.value ? [e.target.value] : [])\n          }\n          onPressEnter={() => handleSearch(selectedKeys, confirm)}\n          style={{ width: 188, marginBottom: 8, display: \"block\" }}\n        />\n        <Button\n          type=\"primary\"\n          onClick={() => handleSearch(selectedKeys, confirm)}\n          icon=\"search\"\n          size=\"small\"\n          style={{ width: 90, marginRight: 8 }}\n        >\n          Search\n        </Button>\n        <Button\n          onClick={() => handleReset(clearFilters)}\n          size=\"small\"\n          style={{ width: 90 }}\n        >\n          Reset\n        </Button>\n      </div>\n    ),\n    filterIcon: filtered => (\n      <Icon type=\"search\" style={{ color: filtered ? \"#1890ff\" : undefined }} />\n    ),\n    onFilter: (value, record) =>\n      record[dataIndex]\n        .toString()\n        .toLowerCase()\n        .includes(value.toLowerCase()),\n    onFilterDropdownVisibleChange: visible => {\n      if (visible) {\n        setTimeout(() => searchInput.select());\n      }\n    },\n    render: text => (\n      <Highlighter\n        highlightStyle={{ backgroundColor: \"#ffc069\", padding: 0 }}\n        searchWords={[searchText]}\n        autoEscape\n        textToHighlight={text.toString()}\n      />\n    )\n  });\n  const handleSearch = (selectedKeys, confirm) => {\n    confirm();\n    setSerchText(selectedKeys[0]);\n  };\n\n  const handleReset = clearFilters => {\n    clearFilters();\n    setSerchText(\"\");\n  };\n\n  // 필터 기능\n  const handleChange = (pagination, filters, sorter) => {\n    // console.log(\"Various parameters\", pagination, filters, sorter);\n    setFilterdInfo(filters);\n    setSortedInfo(sorter);\n    // this.setState({\n    //   filteredInfo: filters,\n    //   sortedInfo: sorter\n    // });\n  };\n  const filtedEdeg1code = LIST_EDEG1CODE.map((item, index) => {\n    return {\n      text: item.name,\n      value: item.name\n    };\n  });\n\n  const columns = [\n    {\n      title: \"구분\",\n      dataIndex: \"EDEG1Name\",\n      key: \"EDEG1Name\",\n      width: \"10%\",\n      filters: filtedEdeg1code.filter(\n        item =>\n          item.text === \"인사\" || item.text === \"업무\" || item.text === \"총무\"\n      ),\n      filteredValue: filteredInfo.EDEG1Name || null,\n      onFilter: (value, record) => {\n        // console.log(record, value, record.EDEG1Name.includes(value));\n        return record.EDEG1Name.includes(value);\n      }\n    },\n    {\n      title: \"제목\",\n      dataIndex: \"EDTitle\",\n      key: \"EDTitle\",\n      width: \"50%\",\n      ...getColumnSearchProps(\"EDTitle\")\n    },\n    {\n      title: \"기안일\",\n      dataIndex: \"EDDateTime\",\n      key: \"EDDateTime\",\n      width: \"20%\",\n      sorter: (a, b) => new Date(a.EDDateTime) - new Date(b.EDDateTime),\n      sortOrder: sortedInfo.columnKey === \"EDDateTime\" && sortedInfo.order\n    },\n    {\n      title: \"결재자\",\n      dataIndex: \"EJAFTJOINSTNAME\",\n      key: \"EJAFTJOINSTNAME\",\n      width: \"10%\",\n      ...getColumnSearchProps(\"EJAFTJOINSTNAME\")\n    },\n    {\n      title: \"상태\",\n      dataIndex: \"EJSIGNNAME\",\n      key: \"EJSIGNNAME\",\n      width: \"10%\"\n    }\n  ];\n  const columns2 = [\n    {\n      title: \"구분\",\n      dataIndex: \"EDEG1Name\",\n      key: \"EDEG1Name\",\n      width: \"10%\",\n      filters: filtedEdeg1code.filter(\n        item =>\n          item.text === \"인사\" || item.text === \"업무\" || item.text === \"총무\"\n      ),\n      filteredValue: filteredInfo.EDEG1Name || null,\n      onFilter: (value, record) => {\n        // console.log(record, value, record.EDEG1Name.includes(value));\n        return record.EDEG1Name.includes(value);\n      }\n    },\n    {\n      title: \"제목\",\n      dataIndex: \"EDTitle\",\n      key: \"EDTitle\",\n      width: \"50%\",\n      ...getColumnSearchProps(\"EDTitle\")\n    },\n    {\n      title: \"기안일\",\n      dataIndex: \"EDDateTime\",\n      key: \"EDDateTime\",\n      width: \"20%\",\n      sorter: (a, b) => new Date(a.EDDateTime) - new Date(b.EDDateTime),\n      sortOrder: sortedInfo.columnKey === \"EDDateTime\" && sortedInfo.order\n    },\n    {\n      title: \"기안자\",\n      dataIndex: \"EJBEFJOINSTNAME\",\n      key: \"EJBEFJOINSTNAME\",\n      width: \"10%\",\n      ...getColumnSearchProps(\"EJBEFJOINSTNAME\")\n    },\n    {\n      title: \"상태\",\n      dataIndex: \"EJSIGNNAME\",\n      key: \"EJSIGNNAME\",\n      width: \"10%\"\n    }\n  ];\n  const columns3 = [\n    {\n      title: \"구분\",\n      dataIndex: \"EDEG1Name\",\n      key: \"EDEG1Name\",\n      width: \"10%\",\n      filters: filtedEdeg1code.filter(\n        item =>\n          item.text === \"인사\" || item.text === \"업무\" || item.text === \"총무\"\n      ),\n      filteredValue: filteredInfo.EDEG1Name || null,\n      onFilter: (value, record) => {\n        // console.log(record, value, record.EDEG1Name.includes(value));\n        return record.EDEG1Name.includes(value);\n      }\n    },\n    {\n      title: \"제목\",\n      dataIndex: \"EDTitle\",\n      key: \"EDTitle\",\n      width: \"50%\",\n      ...getColumnSearchProps(\"EDTitle\")\n    },\n    {\n      title: \"기안일\",\n      dataIndex: \"EDDateTime\",\n      key: \"EDDateTime\",\n      width: \"20%\",\n      sorter: (a, b) => new Date(a.EDDateTime) - new Date(b.EDDateTime),\n      sortOrder: sortedInfo.columnKey === \"EDDateTime\" && sortedInfo.order\n    },\n    {\n      title: \"기안자\",\n      dataIndex: \"EDSTNAME\",\n      key: \"EDSTNAME\",\n      width: \"10%\",\n      ...getColumnSearchProps(\"EDSTNAME\")\n    },\n    {\n      title: \"상태\",\n      dataIndex: \"EJSIGNNAME\",\n      key: \"EJSIGNNAME\",\n      width: \"10%\"\n    }\n  ];\n  const itemClicked = async (record, index) => {\n    console.log(\"itemClicked\", record, index);\n    await setClickedItem(record);\n    await setEditGubun(\"U\"); // UPDATE\n    await setEditVisible(true);\n  };\n  const TabPane = Tabs.TabPane;\n  return isLogging || edoc === null ? null : (\n    <Tabs type=\"card\">\n      <TabPane tab=\"내 결재함\" key=\"1\">\n        {editVisible ? (\n          <Edit01\n            clickedItem={clickedItem}\n            setEditVisible={setEditVisible}\n            gubun={editGubun}\n            me={me}\n          />\n        ) : (\n          <Table\n            columns={columns}\n            dataSource={doc}\n            onChange={handleChange}\n            onRow={(record, rowIndex) => {\n              return {\n                onClick: () => itemClicked(record, rowIndex)\n              };\n            }}\n          />\n        )}\n      </TabPane>\n      <TabPane tab=\"업무 요청\" key=\"2\">\n        <Table columns={columns2} dataSource={doc2} />\n      </TabPane>\n      <TabPane tab=\"전자 문서함\" key=\"3\">\n        <Table columns={columns3} dataSource={doc3} />\n      </TabPane>\n    </Tabs>\n  );\n  // return <div />;\n};\n\nexport default edoc01;\n"]},"metadata":{},"sourceType":"module"}